@{
    ViewBag.Title = "CreateSurvey";
    Layout = "~/Areas/Business/Views/Shared/_LayoutBusiness.cshtml";
}
@using DIGITAL_GAMIFY.Code
@model DIGITAL_GAMIFY.Entities.SurveyEntity

<link href="@Url.Content(Globalsettings.appcsspath("survey.css"))" rel="stylesheet" type="text/css">

<div class="vd_content-wrapper">
    <div class="vd_container">
        <div class="vd_content clearfix">
            <div class="vd_head-section clearfix">
                <div class="vd_panel-header mylinks">
                    <ul class="breadcrumb">
                        <li>Survey </li>
                        <li class="active">Add/Edit</li>
                    </ul>
                    <div class="vd_panel-menu hidden-sm hidden-xs resize-content" data-intro="" data-step="5" data-position="left">
                        <div data-action="remove-navbar" data-original-title="" data-toggle="tooltip" data-placement="bottom" class="remove-navbar-button menu"><i class="fa fa-arrows-h"></i></div>
                        <div data-action="remove-header" data-original-title="" data-toggle="tooltip" data-placement="bottom" class="remove-header-button menu"><i class="fa fa-arrows-v"></i></div>
                        <div data-action="fullscreen" data-original-title="" data-toggle="tooltip" data-placement="bottom" class="fullscreen-button menu"><i class="glyphicon glyphicon-fullscreen"></i></div>
                    </div>
                </div>
            </div>
            <div class="vd_content-section clearfix subdiv">
                <div class="col-lg-12 ">
                    <div class="row" id="advanced-input">
                        <div class="col-md-12">
                        </div>
                    </div>
                    <div class="row" id="auto-complete-input">
                        <div class="col-md-12">
                            <div class="panel widget">
                                <div class="panel-heading vd_bg-grey">
                                    <h3 class="panel-title"><span class="menu-icon"><i class="fa fa-gamepad"></i></span>Add/Edit Survey </h3>
                                </div>
                                <div class="panel-body form-horizontal">
                                    @using (Html.BeginForm("CreateSurvey", "Survey", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                    {
                                        <div class="alert alert-danger vsdiv-full bo-l-0 bo-r-0 bo-rad-0 clearfix @(Html.ViewData.ModelState.IsValid?"hide":"show")" id="error" tabindex='1'>
                                            <span>Errors List</span>
                                            @Html.ValidationSummary()
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="tab-co  ntent">
                                                    <input type="hidden" id="TotalPlayed" name="TotalPlayed" value="0" />
                                                    <input type="hidden" name="SurveyId" id="SurveyId" value="@ViewBag.Surveyid" />
                                                    <input type="hidden" name="txtdataqa" id="txtdataqa" class="txtdataqa" />
                                                    <div class="row">
                                                        <div class="col-xs-12 my-4">
                                                            <form>
                                                                <div class="form-group">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Title : <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="text" class="width-70 width-110 myfilds mytxtfilds isvalidate" errormsg="Enter Title" name="SurveyName" id="surveyname" value="" placeholder="Title" />
                                                                        </div>
                                                                    </div>
                                                                    @*<div class="form-group">
                                                                            <label class="col-sm-2 control-label">SurveyCode : <span class="vd_red">*</span></label>
                                                                            <div class="col-sm-5 controls">
                                                                                <input type="text" class="width-70 width-110 myfilds mytxtfilds" name="SurveyCode" id="SurveyCode" value="" placeholder="QuizCode" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label class="col-sm-2 control-label">SmsCode : <span class="vd_red">*</span></label>
                                                                            <div class="col-sm-5 controls">
                                                                                <input type="text" class="width-70 width-110 myfilds mytxtfilds" name="SmsCode" id="SmsCode" value="" placeholder="SmsCode" />
                                                                            </div>
                                                                        </div>*@
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Start Date <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="text" class="width-70 width-110 myfilds mytxtfilds isvalidate date" errormsg="Enter StartDate" name="StartDate" value="" id="StartDate" placeholder="Date" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">End Date <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="text" class="width-70 width-110 myfilds mytxtfilds isvalidate date" errormsg="Enter EndDate" id="EndDate" name="EndDate" value="" placeholder="Date" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Game Info : <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <textarea class="width-70 width-110 myfilds mytxtfilds isvalidate" name="ShortDescription" errormsg="Enter Gameinfo" id="ShortDescription" placeholder="Game Info"></textarea>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Game Rules : <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <textarea class="width-70 width-110 myfilds mytxtfilds isvalidate" rows="3" errormsg="Enter Conditions" name="Conditions" id="Conditions" placeholder="Game Conditions"></textarea>
                                                                        </div>
                                                                    </div>
                                                                    @*<div class="form-group">
                                                                        <label class="col-sm-2 control-label">Physical Prize?<span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="checkbox" value="1" name="IsComplimentary" id="IsComplimentary" />
                                                                        </div>
                                                                    </div>*@
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Age Required?<span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="checkbox" value="1" name="IsAgeRequire" id="IsAgeRequire" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Age Condition <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <select class="width-70 width-110 myfilds mytxtfilds" id="AgeCondition" name="AgeCondition" bindval="">
                                                                                <option value="1">You must be 18 years and above to enter into the contest.</option>
                                                                                <option value="2">You must be 21 years and above to enter into the contest.</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Game Image : <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <img id="imgpreview" src="" class="previewimg" /><br /><br />
                                                                            @*@Html.TextBoxFor(m => m.Image, new { @class = "hide" })*@
                                                                            <input type="hidden" name="Surveyimage" id="Surveyimage" value="" />
                                                                            <input type="file" class="width-70 width-110 myfilds mytxtfilds @(@ViewBag.Surveyid == 0 ? "isvalidate" : "")" errormsg="Upload Image" placeholder="Upload Image" name="Surveyimg" id="Surveyimg" onchange="readURL(this, 'imgpreview');" />
                                                                            @*@Html.TextBox("ImageFile", null, htmlAttributes: new { name = "ImageFile", @class = "width-70 width-110 myfilds mytxtfilds", type = "file", placeholder = "Upload SwipeanWin Image", id = "ImageFile", onchange = "readURL(this,'imgpreview');" })*@
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">FirstPrize : <span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <img id="FirstPrize" src="" class="previewimg" /><br /><br />
                                                                            <input type="file" class="width-70 width-110 myfilds mytxtfilds gamed @(@ViewBag.Surveyid == 0 ? "isvalidate" : "")" " errormsg=" upload first prize image" name="FirstPrizeImagefile" placeholder="Upload First Prize Image" onchange="readURL(this, 'FirstPrize');" />
                                                                            <input type="hidden" name="FirstPrizeImage" id="FirstPrizeImage" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">First Prize Count : <span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="text" class="width-70 width-110 myfilds mytxtfilds game isvalidate" errormsg="Enter First Prize Count" name="FirstPrizeCount" id="FirstPrizeCount" placeholder="Count" value="" />
                                                                            <label class="control-label">Prizes Left: <span class="vd_red" id="FirstPrizesLeft"></span></label>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">FirstPrize Text : <span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="text" class="width-70 width-110 myfilds mytxtfilds isvalidate" errormsg="Enter First Prize Text" name="FirstPrizeText" id="FirstPrizeText" placeholder="Condition" value="" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Physical Prize?<span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="checkbox" value="1" name="PhysicalPrize1" id="PhysicalPrize1" onchange="Attr1()" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group" id="attri1" style="display:none">
                                                                        <h5 class="m-0 main-txt varians-wrap">Variants (Please enter multiple values with comma separated)</h5>
                                                                        <div id="attributes">

                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">SecondPrize : <span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <img id="SecondPrize" src="" class="previewimg" /><br /><br />
                                                                            <input type="hidden" name="SecondPrizeImage" id="SecondPrizeImage" />
                                                                            <input type="file" class="width-70 width-110 myfilds mytxtfilds gamed @(@ViewBag.Surveyid == 0 ? "isvalidate" : "")" " errormsg=" upload second prize image" name="SecondPrizeImagefile" placeholder="Upload First Prize Image" onchange="readURL(this, 'SecondPrize');" />
                                                                            @*@Html.TextBox("ImageFile", null, htmlAttributes: new { name = "ImageFile", @class = "width-70 width-110 myfilds mytxtfilds", type = "file", placeholder = "Upload SwipeanWin Image", id = "ImageFile", onchange = "readURL(this,'imgpreview');" })*@
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Second Prize Count : <span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="text" class="width-70 width-110 myfilds mytxtfilds game isvalidate" errormsg="Enter Second Prize Count" name="SecondPrizeCount" id="SecondPrizeCount" placeholder="Count" value="" />
                                                                            <label class="control-label">Prizes Left: <span class="vd_red" id="SecondPrizesLeft"></span></label>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">SecondPrize Text : <span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="text" class="width-70 width-110 myfilds mytxtfilds isvalidate" errormsg="Enter Second Prize Text" name="SecondPrizeText" id="SecondPrizeText" placeholder="Condition" value="" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Physical Prize?<span class="vd_red"></span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <input type="checkbox" value="1" name="PhysicalPrize2" id="PhysicalPrize2" onchange="Attr2()" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group" id="attri2" style="display:none">
                                                                        <h5 class="m-0 main-txt varians-wrap">Variants (Please enter multiple values with comma separated)</h5>
                                                                        <div id="attributes2">

                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Once In <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <select class="width-70 width-110 myfilds mytxtfilds gamed isvalidate" id="OnceIn" name="OnceIn" bindval="">
                                                                                <option value="3">3</option>
                                                                                <option value="5">5</option>
                                                                                <option value="10">10</option>
                                                                                <option value="15">15</option>
                                                                                <option value="25">25</option>
                                                                                <option value="50">50</option>
                                                                                <option value="100">100</option>
                                                                                <option value="200">200</option>
                                                                                <option value="500">500</option>
                                                                                <option value="1000">1000</option>
                                                                            </select>

                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-2 control-label">Status <span class="vd_red">*</span></label>
                                                                        <div class="col-sm-5 controls">
                                                                            <select class="width-70 width-110 myfilds mytxtfilds" id="Status" name="Status" bindval="">
                                                                                <option value="1">Active</option>
                                                                                <option value="0">InActive</option>
                                                                            </select>

                                                                        </div>
                                                                    </div>
                                                                    <div class="clearfix"></div>

                                                                    <div class="clearfix"></div>
                                                                    <div class="pb-5 border-bottom"></div>
                                                                    <p class="preview-txt mx-2 pl-3"></p>
                                                                    <div class="pb-3 border-bottom"></div>

                                                                    <div class="my-2">
                                                                        <div class="survey-qs-container dsqadivedit">

                                                                        </div>
                                                                        <button type="button" class="addquestion-btn adda" data-target="survey-qs-container" onclick="AddorRemoveSurveyQuestionfield()">+ Add Question here</button>

                                                                        <div class="divsqaeditdummy" style="display:none" data-qid="0">
                                                                            <div class="my-5 survey-question">
                                                                                <a href="void(0)" class="remove_field" style="color: #ea0808" onclick="RemoveSurveyQuestionfield(this)"><i class="fa fa-times-circle pull-right"></i></a>
                                                                                <div class="col-xs-6 my-2 px-2">
                                                                                    <textarea class="form-control main-input txtq" data-qid="0" rows="12" placeholder="Enter your question here"></textarea>
                                                                                    <div class="form-group">
                                                                                        <label class="col-sm-4 control-label">Allow UserText :<span class="vd_red"></span></label>
                                                                                        <div class="col-sm-5 controls">
                                                                                            <input type="checkbox" class="IsTextField" name="IsTextField" id="IsTextField" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-xs-6 mb-3 answers">
                                                                                    <ol class="row dsanslistedit"></ol>
                                                                                    <button type="button" onclick="AddorRemoveSurveyAnswerfield(this)" class="adda"><i class="fa fa-plus fa-1x"></i> Add answer here</button>
                                                                                </div>
                                                                                <div class="clearfix"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="clearfix"></div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group form-actions">
                                                    <div class="col-sm-2"></div>
                                                    <div class="col-sm-9">
                                                        <button class="btn vd_btn vd_bg-green vd_white" onclick="return validate(Addsurvey())" type="submit"><i class="icon-ok"></i>Save</button>
                                                        @Html.ActionLink("Cancel", "ViewSurveys", new { controller = "Survey" }, new { @class = "btn btn-danger" })
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="hide">
                                            <input type="text" name="txtremovedataa" id="txtremovedataa" class="txtremovedataa" />
                                            <input type="text" name="txtremovedataq" id="txtremovedataq" class="txtremovedataq" />
                                        </div>
                                    }
                                </div>
                                <div class="col-md-4" id="qrcode">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<link href="@Url.Content(Globalsettings.admincsspath("bootstrap-multiselect.css"))" rel="stylesheet" type="text/css">
<link href="@Url.Content(Globalsettings.admincsspath("bs-datetime.css"))" rel="stylesheet" />
<script type="text/javascript" src="@Url.Content(Globalsettings.adminjspath("bootstrap-multiselect.js"))"></script>
@*<script type="text/javascript" src="@Url.Content(Globalsettings.adminjspath("daterangepicker.js?v=1.0.0"))"></script>*@
<script type="text/javascript" src="@Url.Content(Globalsettings.adminjspath("moment.min.js?v=1.0.0"))"></script>
<script type="text/javascript" src="@Url.Content(Globalsettings.adminjspath("jquery.validate.min.js"))"></script>
<script type="text/javascript" src="@Url.Content(Globalsettings.adminjspath("jquery.validate.unobtrusive.min.js"))"></script>
<script type="text/javascript" src="@Url.Content(Globalsettings.adminjspath("inputmask.js"))"></script>
<script src="@Url.Content(Globalsettings.adminjspath("bootstrap-datepicker.min.js"))"></script>
<script type="text/javascript" src="@Url.Content(Globalsettings.adminjspath("Survey.js"))"></script>
<script>
    function Addsurvey() {
        var sid = $('#SurveyId').val();
        AddSurveyQuestions(sid);
    }
    $(document).ready(function () {
        var sid = $('#SurveyId').val();
        GetSurveyQandAedit(sid);
    });
</script>
<script>
    //$('.date').datepicker({
    //    format: 'dd-mm-yyyy',
    //    startDate: '-3d'
    //});
    $('.date').datepicker({
        format: 'dd-M-yyyy',
        widgetPositioning: {
            horizontal: 'right',
            vertical: 'bottom'
        },
        // sideBySide: true,
        icons: {
            date: 'fa fa-calendar',
            up: 'fa fa-chevron-up',
            down: 'fa fa-chevron-down',
            previous: 'fa fa-chevron-left',
            next: 'fa fa-chevron-right',
            today: 'fa fa-check',
            clear: 'fa fa-trash',
            close: 'fa fa-times'
        }
    });

</script>





