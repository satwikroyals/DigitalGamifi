@{
    Layout = null;
}

@using DIGITAL_GAMIFY.Code
<!DOCTYPE html>

<html>
<head>
    <title>Register</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link href="~/customercontent/css/bootstrap.min.css" type="text/css" rel="stylesheet" media="all">
    <link href="~/customercontent/css/styles.css" type="text/css" rel="stylesheet" media="all">
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>
        var websiteurl = '@Globalsettings.GetWebSiteUrl()';
        var websiteurlapi = '@Globalsettings.GetWebSiteUrlApi()';
    </script>
    <style>
        .latin-divs {
            margin: -30px 0px 33px 0px;
        }

        .pd {
            margin: 0px 0px 17px 0px;
        }

        .tbh-color {
            color: #000;
            line-height: 20px;
            text-align: justify;
        }
        .small {
            height: 60px;
            overflow: hidden;
        }
        .big {
            height: auto;
        }
        .morecontent span {
            display: none;
        }

        .morelink {
            display: block;
        }
    </style>
</head>
<body>
    <div class="main-row">
        <input type="hidden" id="agefield" value="@ViewBag.Age" />
        <input type="hidden" id="condition" value="@ViewBag.cond" />
        <input type="hidden" id="bid" value="@ViewBag.bid" />
        <input type="hidden" id="sweepgame" value="@ViewBag.sweep" />
        <div class="" id="disp1" style="display:none">
            <div class="">
                <div class="frame-border">
                    <div class="container-fluid p-0 content-h boxscroll do-nicescrol4 main-bcgk">
                        <div class="container py-5">
                            <div class="row">
                                <div class="col-md-12 mx-auto">
                                    <div id="second" style="display:none">
                                        <div class="myform form ">
                                            <div class="logo mb-3">
                                                <div class="col-md-12 text-center">
                                                    <h6 class="text-dark">Enter the Code which we sent to your mail.</h6>
                                                </div>
                                            </div>
                                            <form action="" method="post" name="login">
                                                <div class="form-group">
                                                    <input type="text" name="code" class="form-control" id="code" placeholder="Verification Code">
                                                </div>
                                                <div class="col-md-12 text-center ">
                                                    <button type="button" class=" btn btn-block mybtn text-white g-btn tx-tfm" onclick="return Register()">Proceed</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div id="first">
                                        <div class="myform form ">
                                            <div class="logo mb-3">
                                                <div class="col-md-12 text-center">
                                                    <h3 class="text-dark">Sign up</h3>
                                                </div>
                                            </div>
                                            <form action="#" name="registration">
                                                <input type="hidden" id="customerid" value="" />
                                                <input type="hidden" id="url" value="@ViewBag.url" />
                                                <input type="hidden" id="VerifyCode" value="">
                                                <div class="form-group">
                                                    <input type="text" name="FirstName" class="form-control" id="FirstName" aria-describedby="emailHelp" placeholder="Enter First Name">
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" name="LastName" class="form-control" id="LastName" aria-describedby="emailHelp" placeholder="Enter Last Name">
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" name="Mobile" class="form-control" id="Mobile" aria-describedby="emailHelp" maxlength="12" placeholder="Enter Mobile" onclick="return validateMobile()">
                                                </div>
                                                <div class="form-group">
                                                    <input type="email" name="Email" class="form-control" id="Email" aria-describedby="emailHelp" placeholder="Enter email">
                                                </div>
                                                <div class="form-group">
                                                    <select id="Gender" class="form-control">
                                                        <option value="0">Select Gender</option>
                                                        <option value="1">Male</option>
                                                        <option value="2">Female</option>
                                                        <option value="3">Other</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <select id="Age" class="form-control">
                                                        <option value="0">Select Age group</option>
                                                        <option value="1">10-21</option>
                                                        <option value="2">22-40</option>
                                                        <option value="3">41-65</option>
                                                        <option value="4">65+</option>
                                                    </select>
                                                </div>
                                                <div class="form-group sweep" style="display:none">
                                                    <select id="StateId" name="StateId" class="form-control" default="0">
                                                        <option value="0">Select State</option>
                                                    </select>
                                                </div>
                                                @*<div class="form-group sweep" style="display:none">
                                                    <input type="text" name="StateId" class="form-control" id="StateId" aria-describedby="emailHelp" placeholder="State">
                                                </div>*@
                                                <div class="form-group sweep" style="display:none">
                                                    <input type="text" name="City" class="form-control" id="City" aria-describedby="emailHelp" placeholder="City">
                                                </div>
                                                <div class="form-group sweep" style="display:none">
                                                    <textarea name="Address" class="form-control" id="Address" aria-describedby="emailHelp" placeholder="Street Address"></textarea>
                                                </div>
                                                <div class="form-group sweep" style="display:none">
                                                    <textarea name="AddressLine2" class="form-control" id="AddressLine2" aria-describedby="emailHelp" placeholder="Address Line2"></textarea>
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" name="ZipCode" class="form-control" id="ZipCode" aria-describedby="emailHelp" placeholder="ZIP Code">
                                                </div>
                                                <div class="form-group sweep" style="display:none">
                                                    <h6>How did you hear about Sweepstakes?</h6>
                                                    <input type="text" name="ReferredBy" class="form-control" id="ReferredBy" aria-describedby="emailHelp" placeholder="How did you hear about Sweepstakes?">
                                                </div>
                                             
                                                <div class="col-md-12 text-center">
                                                    <button type="button" class=" btn btn-block mybtn text-white g-btn tx-tfm" onclick="return Register()">Signup</button>
                                                </div>
                                                @*<div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <p class="text-center"><a href="#" id="signin">Already have an account?</a></p>
                                                        </div>
                                                    </div>*@
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="circle-button"></div>
        </div>


        <div class="" id="disp2" style="display:block">
            <div class="">
                <div class="frame-border">
                    <div class="container-fluid p-0 content-h boxscroll do-nicescrol4 main-bg">
                        <div class="wrap">

                            <div class="mt-6 mb-3">
                                <div class="wong-bkg">
                                    <div class="my-2 chmy-1"><img src="@ViewBag.logo" class="img-fluid w-51"></div>
                                    <h5 class="t-color px-3">@ViewBag.bname</h5>
                                </div>
                                <div>
                                    <div class="my-2"><img src="@ViewBag.Gimage" class="img-fluid w-52"></div>
                                    <h6 class="px-3 py-3">@ViewBag.desc</h6>
                                    <div id="cond1" style="display:none">
                                        <h6 style="margin-bottom: -0.5rem; color: #993232">Conditions:</h6>
                                        <h6 style="color: #993232; font-size: small;" class="px-3 py-3">
                                            @ViewBag.agecondition
                                        </h6>
                                    </div>
                                </div>

                                <div class="">
                                    <a onclick="AgeVerify()" id="btn2" class="btn px-5 rounded-0"> <img src="~/customercontent/images/proceed.png" class="img-fluid w-54"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="circle-button"></div>
            </div>
        </div>


        <div class="" id="disp3" style="display:none">
            <div class="">
                <div class="frame-border">
                    <div class="container-fluid p-0 content-h boxscroll do-nicescrol4 main-bg">
                        <div class="wrap">

                            <div class="mt-6 mb-3">
                                <div class="wong-bkg">
                                    <div class="my-2 chmy-1"><img src="@ViewBag.logo" class="img-fluid w-51"></div>
                                    <h5 class="t-color px-3">@ViewBag.bname</h5>
                                </div>
                                <div class="game-reg istration-form">

                                </div>
                                <div class="label-radio-wrap">
                                    @*<div class="col-md-12 col-sm-12 col-xs-12" id="DOBField" style="display:none">
                                        <div class="latin-divs1">
                                            <p>Date:&nbsp;<input type="date" id="start" name="trip-start"></p>
                                        </div>
                                    </div>*@
                                    <div class="col-md-12 col-sm-12 col-xs-12" id="DOBField" style="display:none">
                                        <div class="form-group">
                                            <h6 class="w3ls-title book">Date of birth</h6>
                                            <input type="text" name="DOB" class="" id="DOB" placeholder="mm/dd/yyyy" maxlength="10">
                                        </div>
                                    </div>
                                    <p><input type="checkbox" id="myinput1" onchange="notrobot()" value="1" /><span class="chechalign">I'm not a Robot</span></p>
                                    <p class="chk"><input id="myinput2" data-toggle="collapse" data-target="#collapseOne" type="checkbox" onchange="terms()" /><span class="chechalign">Game Rules</span></p>
                                </div>
                                <div id="collapseOne" class="wrapper latin-divs panel-collapse collapse in" style="background-color: white;">
                                    <span class="pd more" style="background-color: white;">
                                        @ViewBag.cond
                                    </span>
                                    @*<div class="small" id="small">
                                        <p class="tbh-color px-3 pd" id="gameconditions">@ViewBag.cond</p>
                                    </div>
                                    <a href="#">Click to read more</a>*@
                                </div>
                                @*<span class="more" style="background-color: white;">
                                    @ViewBag.cond
                                </span>*@
                                <br><br>
                                @*<div class="more">
                                    Morbi placerat imperdiet risus quis blandit. Ut lobortis elit luctus, feugiat erat vitae, interdum diam. Nam sit amet arcu vitae justo lacinia ultricies nec eget tellus. Curabitur id sapien massa. In hac <a href="#">habitasse</a> platea dictumst. Integer tristique leo consectetur libero pretium pretium. Nunc sed mauris magna. Praesent varius purus id turpis iaculis iaculis. Nulla <em>convallis magna nunc</em>, id rhoncus massa ornare in. Donec et feugiat sem, ac rhoncus mauris. Quisque eget tempor massa.
                                </div>*@

                                <div class="">
                                    <a class="btn px-5 rounded-0" id="hidebtn"> <img src="~/customercontent/images/play1.png" class="img-fluid w-54"></a>
                                    <a onclick="RegisterPage()" id="showbtn" class="btn px-5 rounded-0" style="display:none"> <img src="~/customercontent/images/proceed.png" class="img-fluid w-54"></a>
                                    @*<a href="" class="btn px-5 rounded-0"> <img src="images/proceed.png" class="img-fluid w-54"></a>*@
                                </div>

                            </div>
                        </div>
                        <div class="termscondition">
                            <h6 class="px-3 py-3"><a href="http://www.gamesnatcherz.com/about/terms" target="_blank">Terms and conditions.</a></h6>
                        </div>

                    </div>
                </div>
                <div class="circle-button"></div>
            </div>
        </div>
    </div>


    <div class="modal" id="myModalbook" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <h3 class="w3ls-title book">Game Rules</h3>
                    <div class="boxpopup-form">
                        <div>
                            @*<h6 class="px-3 py-3">
                                @ViewBag.cond
                            </h6>*@
                        </div>
                    </div>

                    <div class="boxpopup-buuton button-clear">
                        <input type="submit" class="close" onclick="return Accept()" data-dismiss="modal" value="Accept">
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="~/customercontent/js/jquery-3.5.1.slim.min.js"></script>
    <script src="~/customercontent/js/popper.min.js"></script>
    <script src="~/customercontent/js/bootstrap.min.js"></script>
    <script src="~/customercontent/js/global.js"></script>
    <script src="~/customercontent/js/Register.js"></script>
    <script>
        $(document).ready(function () {
            getstateddl();
            if ($("#sweepgame").val() == 1) {
                //alert('l');
                $('.sweep').css("display", "block");
            }
            else {
                $('.sweep').css("display", "none");
            }
            // Configure/customize these variables.
            var showChar = 100;  // How many characters are shown by default
            var ellipsestext = "...";
            var moretext = "Click to read more";
            var lesstext = "Click to read less less";


            $('.more').each(function () {
                var content = $(this).html();

                if (content.length > showChar) {

                    var c = content.substr(0, showChar);
                    var h = content.substr(showChar, content.length - showChar);

                    var html = c + '<span class="moreellipses">' + ellipsestext + '&nbsp;</span><span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink">' + moretext + '</a></span>';

                    $(this).html(html);
                }

            });

            $(".morelink").click(function () {
                if ($(this).hasClass("less")) {
                    $(this).removeClass("less");
                    $(this).html(moretext);
                } else {
                    $(this).addClass("less");
                    $(this).html(lesstext);
                }
                $(this).parent().prev().toggle();
                $(this).prev().toggle();
                return false;
            });
        });
        function getstateddl() {
            gl.ajaxreq(websiteurlapi + "GetStateddl", "GET", null, function (response) {
                if (response != null && response.length > 0) {
                    $.each(response, function (i, item) {
                        $("#StateId").append('<option value="' + item.Abbreviation + '">' + item.Abbreviation + '-' + item.State + '</option>');
                    });
                }
            }, '', '', '', '', false, false);
        }

        $('.wrapper').find('a[href="#"]').on('click', function (e) {
            e.preventDefault();
            $(this).text('Click to read less').closest('.wrapper').find('.small').toggleClass('small big');
        });
        function validateMobile() {
            validateNumber(document.getElementById("Mobile"));
        }
        function validateNumber(e) { var i = function (value) { return /^\d*$/.test(value); };["input", "keydown", "keyup", "mousedown", "mouseup", "select", "contextmenu", "drop"].forEach(function (t) { e.addEventListener(t, function () { i(this.value) ? (this.oldValue = this.value, this.oldSelectionStart = this.selectionStart, this.oldSelectionEnd = this.selectionEnd) : this.hasOwnProperty("oldValue") ? (this.value = this.oldValue, this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd)) : this.value = "" }) }) }
        $(document).ready(function () {
            if ($("#agefield").val() == 1) {
                $("#cond1").css("display", "block");
                $("#DOBField").css("display", "block");
            }
        });
        function Accept() { $('#showbtn').css("display", "block"); $('#hidebtn').css("display", "none"); }
        function urlify(text) {
            var urlRegex = /(https?:\/\/[^\s]+)/g;
            return text.replace(urlRegex, function (url) {
                return '<a href="' + url + '">' + url + '</a>';
            })
            // or alternatively
            // return text.replace(urlRegex, '<a href="$1">$1</a>')
        }
        var text = $("#condition").val();
        var html = urlify(text);

        //console.log(html)
        function terms() {
            var cond = $("#condition").val();
            //var matches = cond.match(/\bhttps?:\/\/\s+/gi);
            // console.log(html);
            if ($("#myinput2").is(":checked")) {
                //$('#myModalbook').modal('show');
                //$('#gameconditions').html(cond);
                if ($("#myinput1").is(":checked")) {
                    $('#showbtn').css("display", "block");
                    $('#hidebtn').css("display", "none");
                }
            }
            else {
                $('#showbtn').css("display", "none");
                $('#hidebtn').css("display", "block");
            }
        }

        function notrobot() {
            if ($("#myinput1").is(":checked")) {
                if ($("#myinput2").is(":checked")) {
                    $('#showbtn').css("display", "block");
                    $('#hidebtn').css("display", "none");
                }
            }
            else {
                $('#showbtn').css("display", "none");
                $('#hidebtn').css("display", "block");
            }
        }

    </script>

    <script type="text/javascript">
        function Proceed() {
            $("#disp1").css("display", "block");
            $("#disp2").css("display", "none");
        }
        function AgeVerify() {
            $("#disp3").css("display", "block");
            $("#disp2").css("display", "none");
        }
        function RegisterPage() {
            var r = /^[A-Za-z]+$/;
            var rgx = /[^a-z0-9\\,\\.\\;]/g;
            if ($('#DOB').val() == "" && $("#agefield").val() == 1) {
                alert("Enter Date of birth.")
            }
            else if (($('#DOB').val().match(r))) {
                alert("Only numbers allowed");
                return;
            }
            else if ($('#DOB').val() != "") {
                var dob = $('#DOB').val().replace('-','/');
                var dt = dob.split('/');
                if (dt[0].match(r)||dt[1].match(r)||dt[2].match(r)) {
                    alert("only numbers allowed.");
                    return;
                }
                else if (dt[0] > 12) {
                    alert("give valid month.");
                }
                else if (dt[1] > 31) {
                    alert("give valid date.");
                }
                else if (dt[2] > new Date().getFullYear()) {
                    alert("give valid year.");
                }
                else {
                    $("#disp1").css("display", "block");
                    $("#disp3").css("display", "none");
                }
            }
            else {
                $("#disp1").css("display", "block");
                $("#disp3").css("display", "none");
            }
        }
        $("#signup").click(function () {
            $("#first").fadeOut("fast", function () {
                $("#second").fadeIn("fast");
            });
        });

        $("#signin").click(function () {
            $("#second").fadeOut("fast", function () {
                $("#first").fadeIn("fast");
            });
        });


    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"
            type="text/javascript"></script>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"
          rel="Stylesheet" type="text/css" />
    <script type="text/javascript">
        $(function () {
            $("#DOB").datepicker({
                changeMonth: true,
                changeYear: true,
                showOn: 'button',
                buttonImageOnly: true,
                buttonImage: websiteurl + 'content/images/calendar.gif',
                dateFormat: 'mm/dd/yy',
                yearRange: '-100y',
                maxDate: '-20y',
                //onSelect: function (dateString, txtDate) {
                //   // ValidateDOB(dateString);
                //}
            });
        });
        function ValidateDOB(dateString) {
            var lblError = $("#lblError");
            var parts = dateString.split("/");
            var dtDOB = new Date(parts[1] + "/" + parts[0] + "/" + parts[2]);
            var dtCurrent = new Date();
            lblError.html("Eligibility 18 years ONLY.")
            if (dtCurrent.getFullYear() - dtDOB.getFullYear() < 18) {
                return false;
            }

            if (dtCurrent.getFullYear() - dtDOB.getFullYear() == 18) {

                //CD: 11/06/2018 and DB: 15/07/2000. Will turned 18 on 15/07/2018.
                if (dtCurrent.getMonth() < dtDOB.getMonth()) {
                    return false;
                }
                if (dtCurrent.getMonth() == dtDOB.getMonth()) {
                    //CD: 11/06/2018 and DB: 15/06/2000. Will turned 18 on 15/06/2018.
                    if (dtCurrent.getDate() < dtDOB.getDate()) {
                        return false;
                    }
                }
            }
            lblError.html("");
            return true;
        }
    </script>
</body>
</html>
